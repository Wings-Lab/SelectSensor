true transmitter (15, 10)  0

[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]

[0] MI = 2.8479054855735573
[1] MI = 3.444685441853912
[2] MI = 3.312868403504585
[3] MI = 3.4301327648839166
[4] MI = 3.376371530459033
[5] MI = 3.154040676186552
[6] MI = 3.6871838997983466
[7] MI = 2.9138947377963746
[8] MI = 4.006898456956184
[9] MI = 3.783763037460243
[10] MI = 3.822114152797109
[11] MI = 3.447112018774386
[12] MI = 3.165628396993868
[13] MI = 4.297356654673308
[14] MI = 3.3337229861385174
[15] MI = 3.6933567134177387
[16] MI = 2.5680566565164575
[17] MI = 3.9094298201655744
[18] MI = 3.404158751930076
[19] MI = 3.2882407704210217
[20] MI = 3.8533846382966437
[21] MI = 2.5766375401158945
[22] MI = 3.569491808912208
[23] MI = 2.685583760667685
MI =  4.297356654673308
[13] [ (6, 5) ]

[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00287 0.03694 0.03694 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.03137 0.03694 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00030 0.03694 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.03694 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.01901 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00517 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00287 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00517 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.01901 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.03694 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00030 0.03694 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.03137 0.03694 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00287 0.03694 0.03694 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00069 0.03694 0.03694 0.03694 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00287 0.03694 0.03694 0.03694 0.03694 ]
[ 0.03137 0.00030 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00030 0.03137 0.03694 0.03694 0.03694 0.03694 0.03694 ]

[0, 13] MI = 0.10615381619848135
[1, 13] MI = 1.6995155593410727
[2, 13] MI = 0.9542634979919705
[3, 13] MI = 0.10694509808453888
[4, 13] MI = 1.8106852482818434
[5, 13] MI = 2.977769636803433
[6, 13] MI = 1.1617519881850953
[7, 13] MI = 3.0184621972385974
[8, 13] MI = 1.4429534495752976
[9, 13] MI = 0.33645586741931255
[10, 13] MI = 1.1285745692442204
[11, 13] MI = 0.3893467031498548
[12, 13] MI = 2.277803534216683
[13, 14] MI = 2.7678620321399987
[13, 15] MI = 2.233373768218351
[13, 16] MI = 1.8364634836084412
[13, 17] MI = 1.2793379178324407
[13, 18] MI = 1.1766435565709628
[13, 19] MI = 2.6930458860331457
[13, 20] MI = 2.099818085155442
[13, 21] MI = 0.476879833582681
[13, 22] MI = 2.6252510876606
[13, 23] MI = 3.002685004849571
MI =  3.0184621972385974
[7, 13] [ (14, 12) (6, 5) ]

[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00160 0.00103 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.36648 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.01308 0.00002 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.25130 0.00000 0.00000 0.00000 0.36648 0.00000 ]

[0, 7, 13] MI = 0.03142836623718826
[1, 7, 13] MI = 0.7840453534954299
[2, 7, 13] MI = 0.6723303048969577
[3, 7, 13] MI = 0.04899987751005879
[4, 7, 13] MI = 0.8820327678554518
[5, 7, 13] MI = 1.6736885235542385
[6, 7, 13] MI = 0.05156708850107551
[7, 8, 13] MI = 0.05608420031715189
[7, 9, 13] MI = 0.20153705018510218
[7, 10, 13] MI = 0.034216418626544204
[7, 11, 13] MI = 0.41695622528825416
[7, 12, 13] MI = 0.8373730027911921
[7, 13, 14] MI = 0.9835414467248224
[7, 13, 15] MI = 1.4130701765574085
[7, 13, 16] MI = 0.03463954957479607
[7, 13, 17] MI = 0.039522936709852456
[7, 13, 18] MI = 0.036850887129403535
[7, 13, 19] MI = 0.7109578064756235
[7, 13, 20] MI = 1.4934957536042077
[7, 13, 21] MI = 0.6862853438528269
[7, 13, 22] MI = 1.3908347026765147
[7, 13, 23] MI = 0.9408784267660825
MI =  1.6736885235542385
[5, 7, 13] [ (12, 13) (14, 12) (6, 5) ]

[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 1.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]

time: 1430.5664007663727
Wrote profile results to select_sensor.py.lprof
Timer unit: 1e-06 s

Total time: 1430.57 s
File: select_sensor.py
Function: select_online_greedy at line 1300

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
  1300                                               @profile
  1301                                               def select_online_greedy(self, budget, true_index):
  1302                                                   '''The online greedy selection. Homogeneous.
  1303                                                   Attributes:
  1304                                                       budget (int)
  1305                                                   '''
  1306         1          4.0      4.0      0.0          plot_data = []
  1307         1         24.0     24.0      0.0          random.seed(1)
  1308         1          8.0      8.0      0.0          np.random.seed(2)
  1309                                                   #rand = random.randint(0, self.grid_len*self.grid_len-1)
  1310         1          1.0      1.0      0.0          true_transmitter = self.transmitters[true_index]         # in online selection, there is one true transmitter somewhere
  1311         1         15.0     15.0      0.0          print('true transmitter', true_transmitter)
  1312         1          1.0      1.0      0.0          subset_index = []
  1313         1          6.0      6.0      0.0          complement_index = [i for i in range(self.sen_num)]
  1314         1        395.0    395.0      0.0          self.print_grid(self.grid_priori)
  1315         1          1.0      1.0      0.0          number_hypotheses = 10*len(self.transmitters)
  1316         1          1.0      1.0      0.0          cost = 0
  1317                                           
  1318         4          4.0      1.0      0.0          while cost < budget and complement_index:
  1319         3      21790.0   7263.3      0.0              true_hypotheses = self.generate_true_hypotheses(number_hypotheses)
  1320         3   35481337.0 11827112.3      2.5              maximum = self.mutual_information(subset_index, true_hypotheses)
  1321         3          4.0      1.3      0.0              best_candidate = complement_index[0]
  1322        72         63.0      0.9      0.0              for candidate in complement_index:
  1323        69        473.0      6.9      0.0                  ordered_insert(subset_index, candidate)
  1324        69 1394806987.0 20214594.0     97.5                  mi = self.mutual_information(subset_index, true_hypotheses)
  1325        69       1482.0     21.5      0.0                  print(subset_index, 'MI =', mi)
  1326        69         58.0      0.8      0.0                  if mi > maximum:
  1327        13          6.0      0.5      0.0                      maximum = mi
  1328        13          7.0      0.5      0.0                      best_candidate = candidate
  1329        69         94.0      1.4      0.0                  subset_index.remove(candidate)
  1330         3         23.0      7.7      0.0              ordered_insert(subset_index, best_candidate)
  1331         3          4.0      1.3      0.0              complement_index.remove(best_candidate)
  1332         3         10.0      3.3      0.0              plot_data.append([str(subset_index), len(subset_index), maximum])
  1333         3         11.0      3.7      0.0              print('MI = ', maximum)
  1334         3         96.0     32.0      0.0              self.print_subset(subset_index)
  1335         3     251382.0  83794.0      0.0              self.update_hypothesis(true_transmitter, subset_index)
  1336         3       1630.0    543.3      0.0              self.print_grid(self.grid_priori)
  1337         3          3.0      1.0      0.0              cost += 1
  1338         1          0.0      0.0      0.0          return plot_data

Total time: 1357.17 s
File: select_sensor.py
Function: mutual_information at line 1428

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
  1428                                               @profile
  1429                                               def mutual_information(self, subset_index, true_hypotheses):
  1430                                                   '''Mutual information between the observation of a subset of sensors and true hypothesis
  1431                                                   Attributes:
  1432                                                       subset_index (list): the X_{T,sk} in Algorithm-2,  R2 in the I(R1,R2) formula
  1433                                                       true_hypotheses (list): the Y in Algorithm-2,      R1 in the I(R1,R2) formula
  1434                                                   Return:
  1435                                                       (float) mutual information
  1436                                                   '''
  1437        72         59.0      0.8      0.0          if not subset_index:
  1438         1          0.0      0.0      0.0              return 0
  1439        71         78.0      1.1      0.0          self.subset_index = subset_index
  1440        71    5316088.0  74874.5      0.4          self.update_transmitters()
  1441        71        121.0      1.7      0.0          sensor_observe = []                  # R2 in the paper
  1442    181831     102115.0      0.6      0.0          for hypothesis in true_hypotheses:   # R1 in the paper
  1443    181760     136694.0      0.8      0.0              true_transmitter = self.transmitters[hypothesis]
  1444    181760     107695.0      0.6      0.0              true_x, true_y = true_transmitter.x, true_transmitter.y
  1445    181760     141584.0      0.8      0.0              data = []                        # data generated from true transmitter
  1446    537600     315585.0      0.6      0.0              for index in subset_index:
  1447    355840     222495.0      0.6      0.0                  sensor = self.sensors[index]
  1448    355840     623773.0      1.8      0.0                  mean, std = self.means_stds.get((true_x, true_y, sensor.x, sensor.y))
  1449    355840    1910740.0      5.4      0.1                  data.append(np.random.normal(mean, std))
  1450  46712320   25192945.0      0.5      1.9              for trans in self.transmitters:
  1451  46530560 1205060444.0     25.9     88.8                  likelihood = trans.multivariant_gaussian.pdf(data)
  1452  46530560   91182049.0      2.0      6.7                  self.grid_posterior[trans.x][trans.y] = likelihood * self.grid_priori[trans.x][trans.y]
  1453                                                       #self.print_grid(self.grid_posterior)
  1454    181760    1189516.0      6.5      0.1              r2 = np.argmax(self.grid_posterior)
  1455    181760     180992.0      1.0      0.0              sensor_observe.append(r2)
  1456        71      19014.0    267.8      0.0          data = np.array([true_hypotheses, sensor_observe])
  1457        71        646.0      9.1      0.0          it_tool = InformationTheoryTool(data)
  1458        71   25462661.0 358629.0      1.9          return it_tool.mutual_information(0, 1)

