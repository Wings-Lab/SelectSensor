true transmitter (15, 10)  0

[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]
[ 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 0.00391 ]

[0] MI = 0.933475830828
[1] MI = 2.18624837417
[2] MI = 2.25724863288
[3] MI = 1.86202001602
[4] MI = 2.21786881576
[5] MI = 4.5632411879
[6] MI = 1.47599325554
[7] MI = 5.29668076537
[8] MI = 3.20711968334
[9] MI = 1.91369817421
[10] MI = 1.73091860709
[11] MI = 1.34686581414
[12] MI = 4.45376055882
[13] MI = 3.09157931339
[14] MI = 5.18753444444
[15] MI = 3.02206605526
[16] MI = 0.680956854605
[17] MI = 2.1141110909
[18] MI = 1.94884557465
[19] MI = 1.31027133768
[20] MI = 2.82694072778
[21] MI = 2.93773494621
[22] MI = 3.53679347345
[23] MI = 4.85634898628
MI =  5.29668076537
[7] [ (14, 12) ]

[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00019 0.00595 0.00019 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.09866 0.13045 0.00033 0.13045 0.09866 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00019 0.13045 0.00000 0.00000 0.00000 0.13045 0.00019 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00595 0.00033 0.00000 0.00000 0.00000 0.00033 0.00595 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00019 0.13045 0.00000 0.00000 0.00000 0.13045 0.00019 ]

[0, 7] MI = 0.103333489222
[1, 7] MI = 1.56912819262
[2, 7] MI = 1.38567168116
[3, 7] MI = 0.188751051797
[4, 7] MI = 1.6924480406
[5, 7] MI = 2.70321255222
[6, 7] MI = 0.103445373362
[7, 8] MI = 1.11727971079
[7, 9] MI = 0.702027959491
[7, 10] MI = 0.110155565741
[7, 11] MI = 0.60125716028
[7, 12] MI = 1.69709577946
[7, 13] MI = 1.00868907395
[7, 14] MI = 2.7022359584
[7, 15] MI = 2.32288374295
[7, 16] MI = 0.110435680292
[7, 17] MI = 0.347655873643
[7, 18] MI = 0.317569583839
[7, 19] MI = 1.63865905317
[7, 20] MI = 1.70313010569
[7, 21] MI = 1.48164283662
[7, 22] MI = 2.69447190346
[7, 23] MI = 1.68503230123
MI =  2.70321255222
[5, 7] [ (12, 13) (14, 12) ]

[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 1.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]

[0, 5, 7] MI = 0.000106682405516
[1, 5, 7] MI = 0.000106682406642
[2, 5, 7] MI = 0.000106682406619
[3, 5, 7] MI = 0.00010668240539
[4, 5, 7] MI = 0.00010668240666
[5, 6, 7] MI = 0.000106682404398
[5, 7, 8] MI = 0.000106682404826
[5, 7, 9] MI = 0.000106682406461
[5, 7, 10] MI = 0.000106682324962
[5, 7, 11] MI = 0.000106682406585
[5, 7, 12] MI = 0.000106682406582
[5, 7, 13] MI = 0.000106682406662
[5, 7, 14] MI = 0.000106682406662
[5, 7, 15] MI = 0.00010668240666
[5, 7, 16] MI = 0.000106682320984
[5, 7, 17] MI = 0.00010668231657
[5, 7, 18] MI = 0.000106682337642
[5, 7, 19] MI = 0.000106682326399
[5, 7, 20] MI = 0.000106682406662
[5, 7, 21] MI = 0.000106682367715
[5, 7, 22] MI = 0.000106682388403
[5, 7, 23] MI = 0.00010668240659
MI =  0.000106682406662
[5, 7, 13] [ (12, 13) (14, 12) (6, 5) ]

[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]
[ 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 1.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ]

time: 6.650346040725708
Wrote profile results to select_sensor.py.lprof
Timer unit: 1e-06 s

Total time: 6.64992 s
File: select_sensor.py
Function: select_online_greedy_2 at line 1350

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
  1350                                               @profile
  1351                                               def select_online_greedy_2(self, budget, true_index):
  1352                                                   '''The online greedy selection version 2. Homogeneous.
  1353                                                   Attributes:
  1354                                                       budget (int)
  1355                                                       true_index (int)
  1356                                                   '''
  1357         1          5.0      5.0      0.0          plot_data = []
  1358         1         21.0     21.0      0.0          random.seed(1)
  1359         1          8.0      8.0      0.0          np.random.seed(2)
  1360                                                   #rand = random.randint(0, self.grid_len*self.grid_len-1)
  1361         1          1.0      1.0      0.0          true_transmitter = self.transmitters[true_index]         # in online selection, there is one true transmitter somewhere
  1362         1         13.0     13.0      0.0          print('true transmitter', true_transmitter)
  1363         1          0.0      0.0      0.0          subset_index = []
  1364         1          6.0      6.0      0.0          complement_index = [i for i in range(self.sen_num)]
  1365         1        407.0    407.0      0.0          self.print_grid(self.grid_priori)
  1366         1          3.0      3.0      0.0          init_priori = [self.grid_priori[0][0]] * (self.grid_len*self.grid_len)
  1367         1         69.0     69.0      0.0          h_h = entropy(init_priori, base=2)
  1368         1          0.0      0.0      0.0          cost = 0
  1369                                           
  1370         4          5.0      1.2      0.0          while cost < budget and complement_index:
  1371         3     208641.0  69547.0      3.1              maximum = self.mutual_information_2(subset_index, true_transmitter, h_h)
  1372         3          3.0      1.0      0.0              best_candidate = complement_index[0]
  1373        72         59.0      0.8      0.0              for candidate in complement_index:
  1374        69        361.0      5.2      0.0                  ordered_insert(subset_index, candidate)
  1375        69    6162981.0  89318.6     92.7                  mi = self.mutual_information_2(subset_index, true_transmitter, h_h)
  1376        69        884.0     12.8      0.0                  print(subset_index, 'MI =', mi)
  1377        69         60.0      0.9      0.0                  if mi > maximum:
  1378        12          6.0      0.5      0.0                      maximum = mi
  1379        12          8.0      0.7      0.0                      best_candidate = candidate
  1380        69         77.0      1.1      0.0                  subset_index.remove(candidate)
  1381         3         15.0      5.0      0.0              ordered_insert(subset_index, best_candidate)
  1382         3          2.0      0.7      0.0              complement_index.remove(best_candidate)
  1383         3          6.0      2.0      0.0              plot_data.append([str(subset_index), len(subset_index), maximum])
  1384         3          7.0      2.3      0.0              print('MI = ', maximum)
  1385         3          3.0      1.0      0.0              h_h -= maximum
  1386         3         50.0     16.7      0.0              self.print_subset(subset_index)
  1387         3     274203.0  91401.0      4.1              self.update_hypothesis_2(true_transmitter, subset_index)
  1388         3       2011.0    670.3      0.0              self.print_grid(self.grid_priori)
  1389         3          5.0      1.7      0.0              cost += 1
  1390         1          1.0      1.0      0.0          return plot_data

Total time: 6.30931 s
File: select_sensor.py
Function: mutual_information_2 at line 1541

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
  1541                                               @profile
  1542                                               def mutual_information_2(self, subset_index, true_transmitter, h_h):
  1543                                                   '''the 2nd version of mutual information without generating data, should be faster
  1544                                                   Attributes:
  1545                                                       subset_index (list): the X_{T}
  1546                                                       true_transmitter (int): the true transmitter
  1547                                                       h_h (float): H(h), see equation #20 in the paper
  1548                                                   Return:
  1549                                                       (float) mutual information
  1550                                                   '''
  1551        72         53.0      0.7      0.0          if not subset_index:
  1552         1          1.0      1.0      0.0              return 0
  1553        71        337.0      4.7      0.0          posterior = np.zeros(self.grid_len*self.grid_len)  # compute the entropy from the "temporary posterior grid"
  1554        71        566.0      8.0      0.0          np.random.seed(true_transmitter.x*self.grid_len + true_transmitter.y)
  1555        71         37.0      0.5      0.0          data = []   # the true transmitter generate some data
  1556       210        127.0      0.6      0.0          for index in subset_index:
  1557       139        113.0      0.8      0.0              sensor = self.sensors[index]
  1558       139        293.0      2.1      0.0              mean, std = self.means_stds.get((true_transmitter.x, true_transmitter.y, sensor.x, sensor.y))
  1559       139        785.0      5.6      0.0              data.append(np.random.normal(mean, std))
  1560     18247      13199.0      0.7      0.2          for trans in self.transmitters:
  1561     18176      95609.0      5.3      1.5              trans.set_mean_vec_sub(subset_index)
  1562     18176     512623.0     28.2      8.1              cov_sub = self.covariance[np.ix_(subset_index, subset_index)]
  1563     18176    5620890.0    309.2     89.1              likelihood = multivariate_normal(mean=trans.mean_vec_sub, cov=cov_sub).pdf(data)
  1564     18176      61573.0      3.4      1.0              posterior[trans.x * self.grid_len + trans.y] = likelihood * self.grid_priori[trans.x][trans.y]
  1565        71        769.0     10.8      0.0          posterior = posterior/posterior.sum()
  1566        71       2333.0     32.9      0.0          return h_h - entropy(posterior, base=2)

